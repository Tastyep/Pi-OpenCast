root:
  post:
    tags:
      - playlist
    summary: Add playlist
    description: |
      Add a playlist to the system
    operationId: addPlaylist
    requestBody:
      description: Playlist to add
      required: true
      content:
        "application/json":
          schema:
            $ref: "../definitions/playlist.yml#/Playlist"
    responses:
      "200":
        description: successful operation
        content:
          application/json:
            schema:
              $ref: "../definitions/playlist.yml#/Playlist"

  get:
    tags:
      - playlist
    summary: List playlists
    description: |
      Retrieve a list of all playlists in the database
    operationId: listPlaylists
    responses:
      "200":
        description: successful operation
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "../definitions/playlist.yml#/Playlist"

id:
  get:
    tags:
      - playlist
    summary: Find playlist
    description: |
      Querie and return a playlist with a given ID
    operationId: getPlaylistById
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: ID of the playlist to query
    responses:
      "200":
        description: successful operation
        content:
          application/json:
            schema:
              $ref: "../definitions/playlist.yml#/Playlist"
      "404":
        description: Playlist not found
        content:
          application/json:
            schema:
              $ref: "../definitions/error.yml#/Error"

  patch:
    tags:
      - playlist
    summary: Update playlist
    description: |
      Update an existing playlist
    operationId: updatePlaylist
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: ID of the playlist to query
    requestBody:
      description: Fields to update
      required: true
      content:
        "application/json":
          schema:
            $ref: "../definitions/playlist.yml#/Playlist"
    responses:
      "200":
        description: successful operation
        content:
          application/json:
            schema:
              $ref: "../definitions/playlist.yml#/Playlist"
      "400":
        description: validation error
      "404":
        description: Playlist not found
        content:
          application/json:
            schema:
              $ref: "../definitions/error.yml#/Error"

videos:
  get:
    tags:
      - video
    summary: List playlist videos
    description: |
      Retrieve the videos contained by the playlist
    operationId: listPlaylistVideos
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: ID of the playlist
    responses:
      "200":
        description: successful operation
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "../definitions/video.yml#/Video"
      "404":
        description: Playlist not found
        content:
          application/json:
            schema:
              $ref: "../definitions/error.yml#/Error"

delete:
  tags:
    - playlist
  summary: Remove playlist
  description: |
    Remove a playlist with a given ID
  operationId: deletePlaylistById
  parameters:
    - in: path
      name: id
      schema:
        type: string
      required: true
      description: |
        ID of the playlist to remove
  responses:
    "204":
      description: No content
    "404":
      description: Playlist not found
      content:
        application/json:
          schema:
            $ref: "../definitions/error.yml#/Error"
